<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>í•˜ë£¨ì˜ í–‰ìš´ â€” ì‘ì€ ì„ ë¬¼</title>
  <meta name="description" content="NFC í‚¤ë§ìš© ê°„ë‹¨í•œ í–‰ìš´ ë©”ì‹œì§€ í˜ì´ì§€. ì•„ì´ì½˜ì„ ëˆŒëŸ¬ ì¹œêµ¬ì—ê²Œ í•˜ë£¨ì˜ í–‰ë³µì„ ì„ ë¬¼í•˜ì„¸ìš”." />
  <style>
    :root{
      --bg1:#F7E4E8;
      --bg2:#D9A7B0;
      --accent:#8C3A53; /* ë©”ì¸ ë²„ê±´ë”” í¬ì¸íŠ¸ */
      --muted:#705C60;
      --card:#FFFFFF;
      font-family: 'Noto Sans KR', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; padding:32px; background:linear-gradient(135deg,var(--bg1),var(--bg2));
      display:flex; align-items:center; justify-content:center; color:#0f172a;
    }
    .card{
      width:100%; max-width:420px; background:var(--card); border-radius:18px; padding:28px; box-shadow:0 8px 30px rgba(15,23,42,0.08);
      text-align:center;
    }
    h1{margin:0 0 8px; font-size:20px}
    p.lead{margin:0 0 20px; color:var(--muted)}
    
    .lucky-btn{
      width:140px; height:140px;
      border-radius:50%;
      margin:12px auto;
      display:flex; align-items:center; justify-content:center;
      cursor:pointer;
      background:linear-gradient(180deg, rgba(140,58,83,0.15), rgba(140,58,83,0.08));
      border:2px solid rgba(140,58,83,0.15);
      transition:transform .18s ease, box-shadow .18s ease;
      position:relative;
      overflow:visible;
    }
    .lucky-btn:active{transform:scale(.98)}
    .icon{width:72px; height:72px; display:inline-block}
    .hint{font-size:13px; color:var(--muted); margin-top:10px}

    /* modal */
    .modal-backdrop{position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(2,6,23,0.44); opacity:0; pointer-events:none; transition:opacity .2s ease}
    .modal-backdrop.show{opacity:1; pointer-events:auto}
    .modal{background:linear-gradient(180deg,#ffffff,#fffafc); border-radius:14px; padding:22px; width:90%; max-width:380px; text-align:center; box-shadow:0 20px 50px rgba(2,6,23,0.28); transform:translateY(8px); transition:transform .18s ease}
    .fortune{font-size:18px; margin:8px 0 12px; line-height:1.45}
    .close-btn{background:var(--accent); color:white; border:none; padding:10px 16px; border-radius:10px; font-weight:600; cursor:pointer}
    
    /* --- confetti (replace existing confetti css) --- */
    .confetti-piece{
      position:fixed;
      opacity:0.98;
      transform-origin:center;
      will-change:transform, opacity, left, top;
      pointer-events:none;
      z-index:9999;
    }
    
    /* ê½ƒì */
    .confetti-piece.petal{
      clip-path: ellipse(45% 60% at 50% 40%);
      border-radius:50%;
      box-shadow: 0 1px 2px rgba(0,0,0,0.06) inset;
    }
    
    /* ê¹ƒí„¸ (ê¸¸ì­‰í•œ í˜•íƒœ + ì‚´ì§ í†±ë‹ˆ ëŠë‚Œ) */
    .confetti-piece.feather{
      clip-path: polygon(20% 0%, 80% 0%, 100% 20%, 100% 80%, 80% 100%, 20% 100%, 0% 80%, 0% 20%);
      border-radius:6px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    }
    
    /* ë‚™í•˜ ì• ë‹ˆë©”ì´ì…˜: ìœ„ -> ì•„ë˜ (opacity ê°ì†Œ í¬í•¨) */
    @keyframes confetti-fall {
      0%   { transform: translateY(-10vh) rotate(0deg) ; opacity:1; }
      60%  { opacity:1; }
      100% { transform: translateY(110vh) rotate(720deg); opacity:0; }
    }
    
    /* ì¢Œìš° í”ë“¤ë¦¼ (ê°€ë¡œ ì´ë™) */
    @keyframes confetti-sway {
      0%   { transform: translateX(0) rotate(0deg) }
      25%  { transform: translateX(-12px) rotate(8deg) }
      50%  { transform: translateX(0) rotate(-6deg) }
      75%  { transform: translateX(12px) rotate(4deg) }
      100% { transform: translateX(0) rotate(0deg) }
    }

    footer{margin-top:18px; font-size:12px; color:var(--muted)}

    /* responsive */
    @media (max-width:420px){body{padding:16px}.card{padding:20px}}
  </style>
</head>
<body>
  <main class="card" role="main">
    <h1>í•˜ë£¨ì˜ í–‰ìš´ì„ ì „í•´ìš” âœ¨</h1>
    <p class="lead">NFC í‚¤ë§ìœ¼ë¡œ ì—°ê²°ë˜ëŠ” ê°„ë‹¨í•œ í˜ì´ì§€ì…ë‹ˆë‹¤. ë²„íŠ¼ì„ ëˆŒëŸ¬ ì¹œêµ¬ì—ê²Œ ì‘ì€ í–‰ë³µì„ ì„ ë¬¼í•˜ì„¸ìš”.</p>

    <button class="lucky-btn" id="luckyBtn" aria-label="í–‰ìš´ì˜ ë©”ì‹œì§€ ë°›ê¸°">
      <!-- love letter icon -->
      <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden>
        <rect x="3" y="5" width="18" height="14" rx="2" ry="2" stroke="currentColor" stroke-width="1.8" fill="none"/>
        <path d="M3 7l9 7 9-7" stroke="currentColor" stroke-width="1.8" fill="none"/>
        <path d="M12 12.5l2-2a1.5 1.5 0 0 0-2-2 1.5 1.5 0 0 0-2 2l2 2z" fill="currentColor"/>
      </svg>
    </button>


    <div class="hint">ì•„ì´ì½˜ì„ ëˆŒëŸ¬ í–‰ìš´ì˜ ë¬¸êµ¬ë¥¼ ë°›ì•„ë³´ì„¸ìš”.</div>

    <footer>ì›í•˜ëŠ” ë¬¸êµ¬ë¡œ ì‰½ê²Œ êµì²´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ â€” ë§ˆìŒì— ë“œëŠ” ë¬¸êµ¬ë¥¼ ë„£ì–´ ì¹œêµ¬ì—ê²Œ ê³µìœ í•˜ì„¸ìš”.</footer>
  </main>

  <!-- modal -->
  <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document">
      <div style="font-size:32px">ğŸ€</div>
      <div id="fortuneText" class="fortune">í–‰ìš´ì˜ ë©”ì‹œì§€</div>
      <button id="closeBtn" class="close-btn">ë°›ì•˜ì–´ìš”</button>
    </div>
  </div>

  <script>
    // ë©”ì‹œì§€ ëª©ë¡(ì›í•˜ì‹œë©´ ììœ ë¡­ê²Œ í¸ì§‘í•˜ì„¸ìš”)
    const MESSAGES = [
      'ì˜¤ëŠ˜ì€ ì‘ì€ ê¸°ì ì´ ë‹¹ì‹ ì˜ í¸ì´ì—ìš”. í•œ ë²ˆ ë¯¸ì†Œ ì§€ì–´ë³´ì„¸ìš”.',
      'ìƒˆë¡œìš´ ì‹œë„ë¥¼ í•´ë³¼ ì¢‹ì€ ë‚ ì´ì—ìš” â€” ìš©ê¸°ë¥¼ ë‚´ë³´ì„¸ìš”!',
      'ëˆ„êµ°ê°€ ë‹¹ì‹  ìƒê°ì„ í•˜ê³  ìˆì–´ìš”. ê·¸ ì‚¬ëŒê³¼ ë”°ëœ»í•œ ëŒ€í™”ë¥¼ ë‚˜ëˆ ë³´ì„¸ìš”.',
      'í–‰ë³µì€ ì˜¤ëŠ˜ì˜ ì‘ì€ ì„ íƒì—ì„œ ì‹œì‘ë©ë‹ˆë‹¤. í•œ ê°€ì§€ ì¢‹ì€ ì¼ì„ í•´ë³´ì„¸ìš”.',
      'ì˜ˆìƒì¹˜ ëª»í•œ ê¸°ì¨ì´ ì°¾ì•„ì˜¬ ê±°ì˜ˆìš” â€” ëˆˆì„ í¬ê²Œ ë– ë³´ì„¸ìš”!',
      'ë‹¹ì‹ ì€ ìƒê°ë³´ë‹¤ ê°•í•´ìš”. ì§€ê¸ˆì˜ ê±¸ìŒì´ í° ë³€í™”ë¥¼ ë§Œë“­ë‹ˆë‹¤.',
      'ì‘ì€ ì¹œì ˆì´ í° í–‰ë³µìœ¼ë¡œ ëŒì•„ì˜µë‹ˆë‹¤. ëˆ„êµ°ê°€ì—ê²Œ ì¹œì ˆì„ ë² í’€ì–´ë³´ì„¸ìš”.',
      'ì§€ê¸ˆ í•˜ëŠ” ìˆ¨ í•œ ë²ˆì´ ë§ˆìŒì„ ê°€ë¼ì•‰íˆëŠ” ë§ˆë²•ì´ ë  ê±°ì˜ˆìš”.',
      'ì˜¤ëŠ˜ì˜ ì»¤í”¼(ë˜ëŠ” ì°¨)ê°€ íŠ¹ë³„íˆ ë” ë§›ìˆê²Œ ëŠê»´ì§ˆ ê±°ì˜ˆìš”.',
      'ì›ƒìŒì€ ì „ì—¼ë©ë‹ˆë‹¤ â€” ë¨¼ì € ì›ƒì–´ì£¼ì„¸ìš”.'
    ];

    const btn = document.getElementById('luckyBtn');
    const modal = document.getElementById('modalBackdrop');
    const fortuneText = document.getElementById('fortuneText');
    const closeBtn = document.getElementById('closeBtn');

    function randChoose(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

    function showModal(message){
      fortuneText.textContent = message;
      modal.classList.add('show');
      modal.setAttribute('aria-hidden','false');
      launchConfetti();
    }
    function hideModal(){
      modal.classList.remove('show');
      modal.setAttribute('aria-hidden','true');
    }

    btn.addEventListener('click',()=>{
      const msg = randChoose(MESSAGES);
      showModal(msg);
    });
    closeBtn.addEventListener('click',hideModal);
    modal.addEventListener('click',(e)=>{ if(e.target===modal) hideModal(); });

    /* --- JavaScript: replace existing launchConfetti() --- */
    function launchConfetti(){
      // ìƒ‰ìƒ íŒ”ë ˆíŠ¸ (ë²„ê±´ë””/ë¡œì¦ˆ ê³„ì—´)
      const palettes = [
        ['#8C3A53','#B35A72'], // ì§„í•œ ë²„ê±´ë”” -> ì¤‘ê°„
        ['#B35A72','#DDA6B8'], // ì¤‘ê°„ -> ì—°í•‘í¬
        ['#DDA6B8','#F2D7DD'], // ì—°í•‘í¬ -> ì•„ì£¼ì—°í•œ
        ['#FFF1F3','#FFDDEE']  // ì—°ì•„ì´ë³´ë¦¬ -> ì—°í•‘í¬í†¤
      ];
      
      const count = 26;
      for(let i=0;i<count;i++){
        const el = document.createElement('div');
        el.className = 'confetti-piece';
        
        // ëœë¤ìœ¼ë¡œ ê½ƒì/ê¹ƒí„¸ ì¤‘ ì„ íƒ (ì•½ 60% petal, 40% feather)
        const isPetal = Math.random() < 0.6;
        el.classList.add(isPetal ? 'petal' : 'feather');
        
        // í¬ê¸° ì„¤ì •: ê½ƒìì€ ì‘ê³  ë„“ê²Œ, ê¹ƒí„¸ì€ ê¸¸ì­‰í•˜ê²Œ
        if(isPetal){
          const w = 8 + Math.random()*18;   // 8 ~ 26px
          const h = 12 + Math.random()*22;  // 12 ~ 34px
          el.style.width = `${w}px`;
          el.style.height = `${h}px`;
        } else {
          const w = 6 + Math.random()*10;   // 6 ~ 16px
          const h = 18 + Math.random()*48;  // 18 ~ 66px
          el.style.width = `${w}px`;
          el.style.height = `${h}px`;
        }
        
        // ë°°ê²½: ë‘ ìƒ‰ìƒì˜ ê·¸ë¼ë°ì´ì…˜ìœ¼ë¡œ ê¹Šì´ê° ì¶”ê°€
        const pal = palettes[Math.floor(Math.random()*palettes.length)];
        const angle = 90 + Math.floor(Math.random()*80); // ê·¸ë¼ë°ì´ì…˜ ê°ë„ ì•½ê°„ ëœë¤
        el.style.background = `linear-gradient(${angle}deg, ${pal[0]}, ${pal[1]})`;
        
        // ìœ„ì¹˜: ê°€ìš´ë° ê·¼ì²˜ì—ì„œ ì•½ê°„ í¼ì§€ê²Œ
        const startLeft = 50 + (Math.random()*60 - 30); // 20% ~ 80%
        el.style.left = `${startLeft}%`;
        el.style.top = `${-10 - Math.random()*8}vh`;
        
        // íšŒì „ ì´ˆê¸°ê°’
        const initialRotate = Math.random()*360;
        el.style.transform = `rotate(${initialRotate}deg)`;
        
        // ì• ë‹ˆë©”ì´ì…˜: ë‚™í•˜ + ì¢Œìš° í”ë“¤ë¦¼ (swayëŠ” ease-in-out ë°˜ë³µ)
        const delay = Math.random()*0.25;
        const duration = 1.3 + Math.random()*1.4; // 1.3 ~ 2.7s
        el.style.animation = `confetti-fall ${duration}s linear ${delay}s forwards, confetti-sway ${0.9 + Math.random()*0.9}s ease-in-out ${delay}s infinite`;
        
        // íˆ¬ëª…ë„/í‘œë©´ê°
        el.style.opacity = 0.98;
        el.style.backfaceVisibility = 'hidden';
        
        // ì•½ê°„ì˜ ì¢Œìš° ì‹œì‘ ì˜¤í”„ì…‹ì„ transformì— ì¶”ê°€ (smoother)
        const extraX = (Math.random()*40 - 20); // px
        el.style.willChange = 'transform, left, top, opacity';
        el.style.filter = 'saturate(1.02)';
        
        // ì—˜ë¦¬ë¨¼íŠ¸ ì¶”ê°€
        document.body.appendChild(el);
        
        // ì œê±°: ì• ë‹ˆë©”ì´ì…˜ì´ ëë‚œ í›„ ì•ˆì „í•˜ê²Œ ì œê±° (duration + delay + ì—¬ìœ )
        setTimeout(()=>{ try{ el.remove(); }catch(e){} }, (delay + duration + 0.4) * 1000);
      }
    }

    // í‚¤ë³´ë“œ ì ‘ê·¼ì„±: Enter/Spaceë¡œ ë²„íŠ¼ ëˆ„ë¥´ê¸°
    btn.addEventListener('keydown',(e)=>{ if(e.key==='Enter' || e.key===' ') { e.preventDefault(); btn.click(); } });

  </script>
</body>
</html>
